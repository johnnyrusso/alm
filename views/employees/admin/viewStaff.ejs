<%- include ('../partials/admin_header') -%>
    <div class="container mx-auto mt-5 pt-5">
        <div class="row w-100">
            <div class="col-sm-12">
                <h3 class="mx-auto w-100">Current Employees</h3>
            </div>
        </div>
        <table id="example" class="table table-striped table-bordered dt-responsive nowrap" style="width:100%">
            <thead>
                <tr>
                    <th>First name</th>
                    <th>Last name</th>
                    <th>Position</th>
                    <th>Last Date Worked</th>
                    <th>Age</th>
                    <th>Start date</th>
                    <th>Salary</th>
                    <th>Timesheets</th>
                    <th>E-mail</th>
                </tr>
            </thead>
            <tbody>
                <% staff[0].forEach(employee=>{ %>
                    <tr>
                        <td>
                            <%= `${employee.first_name}` %>
                        </td>
                        <td>
                            <%= `${employee.last_name}` %>
                        </td>
                        <td>Labor</td>
                        <td></td>
                        <td>
                            <%= moment().diff(moment(`${employee.dob}`, "YYYY-MM-DD"), 'years') %>
                        </td>
                        <td></td>
                        <td>$10/hr</td>
                        <td>
                            <a href="./employeeTimesheets/<%=`${employee.id}`%>"><a href="#costumModal31" role="button"
                            class="btn btn-default" data-toggle="modal">
                            Timesheets
                        </a>
                        </td>
                        <td>
                            <%= `${employee.email}` %>
                        </td>
                    </tr>
                    <%});%>


            </tbody>
        </table>
        <div id="costumModal31" class="modal mt-5" data-easein="flash" tabindex="-1" role="dialog" aria-labelledby="costumModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                            Ã—
                                        </button>
                        <h4 class="modal-title">
                            Timesheets
                        </h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            <% staff[1].forEach(timesheet=>{ %>
                                <a href="./timesheets/view/<%=`${timesheet.employee_id}`%>/<%=`${timesheet.week_ending}`%>" class="btn btn-large btn-primary">
                                    <%= `${timesheet.week_ending}` %>
                                </a>
                                <br><br>
                                <%});%>
                        </p>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-default" data-dismiss="modal" aria-hidden="true">
                                            Close
                                        </button>
                        <button class="btn btn-primary">
                                            Save changes
                                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <%- include('../partials/staff_footer') -%>

        <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"></script>
        <script src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
        <script src="https://cdn.datatables.net/responsive/2.2.3/js/responsive.bootstrap4.min.js"></script>


        <script>
            $(document).ready(function() {
                $('#example').DataTable();
            });
        </script>